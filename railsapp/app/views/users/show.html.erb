<h1 class="fw-bold">会員詳細</h1>
<p style="color: green"><%= notice %></p>

  <div class ="mb-3">
    <div class="d-flex flex-row mb-3 gap-3 align-items-center">
    <h3 class= "fw-semibold mb-0">会員名：</h3>
    <p class= "fw-semibold mb-0"><%= @user.name %></p>
    <%= link_to "会員情報変更", edit_user_registration_path, class: "btn btn-primary" %>
    </div>
  </div>

<div id="lendings">
  <h3 class= "fw-semibold">貸出中の書籍</h3>
  <% if @lending.any? %>
    <table class = "table">
      <thead>
        <tr>
          <th>書籍タイトル</th>
          <th>返却予定日</th>
          <th colspan="3"></th>
        </tr>
      </thead>
      <% @lending.each do |lending| %>
        <tbody>
            <tr>
              <td><%= lending.book.title %></td>
              <td><%= lending.schedule_date %></td>
              <td><%= link_to "返却する", edit_lending_path(id: lending.book.id), class: "btn btn-outline-primary btn-sm" %></td>
            </tr>
        </tbody>
      <% end %>
    </table>
  <% else %>
    <p>現在貸出中の書籍はありません。</p>
  <% end %>
</div>

<div>
  <h3 class= "fw-semibold mb-4">お気に入り書籍</h3>
  <div class="row row-cols-1 row-cols-md-3 g-4 mb-4">
    <% @liked_books.each do |book| %>
      <div class="col">
        <div class="card">
          <div class="row g-0 card-body">
            <div class="col-md-4">
              <img src= "<%= book.image_link %>" alt="書籍画像">
            </div>
            <div class="col-md-8 p-3">
              <div class="mb-1">
                <h5 class="card-title fw-bold lh-sm"><%= link_to book.title, book_path(id: book.id), class: "link-offset-2 link-underline link-underline-opacity-0" %></h5>
                <p class="card-text text-body-secondary"><%= book.author %></p>
              </div>
              <% if book_available?(book) %>
                <div class="d-grid d-md-flex justify-content-md-end">
                  <%= link_to "借りる", new_lending_path(id: book.id), class: "btn btn-primary" %>
                </div>
              <% elsif latest_lending_user(book) %>
                <div class="d-flex align-items-center mb-4" style="gap: 10px;">
                  <h6 class="card-title fw-bold" style="margin-bottom: 0;">返却予定日：</h6>
                  <p class="card-text fs-6 text-body-secondary"><%= schedule_date_for_lending(book) %></p>
                </div>              
                <div class="d-grid d-md-flex justify-content-md-end">
                  <%= link_to "返却する", edit_lending_path(id: book.id), class: "btn btn-outline-primary" %>
                </div>
              <% else %>
                <div class="d-flex align-items-center mb-4" style="gap: 10px;">
                  <h6 class="card-title fw-bold" style="margin-bottom: 0;">返却予定日：</h6>
                  <p class="card-text fs-6 text-body-secondary"><%= schedule_date_for_lending(book) %></p>
                </div>
                <div class="d-grid d-md-flex justify-content-md-end">
                  <button type="button" class= "btn btn-primary disabled">貸出中</button>
                </div>
              <% end %>         
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
